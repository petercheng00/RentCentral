// ColorBox v1.3.5 - a full featured, light-weight, customizable lightbox based on jQuery 1.3
// c) 2009 Jack Moore - www.colorpowered.com - jack@colorpowered.com
// Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
(function(a){function T(a,b){return b=b==="x"?x.width():x.height(),typeof a=="string"?Math.round(a.match(/%/)?b/100*parseInt(a,10):parseInt(a,10)):a}function U(b){return b=a.isFunction(b)?b.call(M):b,P.photo||b.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function V(){for(var b in P)a.isFunction(P[b])&&b.substring(0,2)!=="on"&&(P[b]=P[b].call(M))}function W(c){M=c,P=a(M).data(b),V();var e=P.rel||M.rel;e&&e!=="nofollow"?(w=a(".cboxElement").filter(function(){var c=a(this).data(b).rel||this.rel;return c===e}),O=w.index(M),O<0&&(w=w.add(M),O=w.length-1)):(w=a(M),O=0),Q||(Q=d,R=d,N=M,N.blur(),a().bind("keydown.cbox_close",function(a){a.keyCode===27&&(a.preventDefault(),f.close())}).bind("keydown.cbox_arrows",function(a){w.length>1&&(a.keyCode===37?(a.preventDefault(),G.click()):a.keyCode===39&&(a.preventDefault(),F.click()))}),P.overlayClose&&o.css({cursor:"pointer"}).one("click",f.close),a.event.trigger(i),P.onOpen&&P.onOpen.call(M),o.css({opacity:P.opacity}).show(),P.w=T(P.initialWidth,"x"),P.h=T(P.initialHeight,"y"),f.position(0),h&&x.bind("resize.cboxie6 scroll.cboxie6",function(){o.css({width:x.width(),height:x.height(),top:x.scrollTop(),left:x.scrollLeft()})}).trigger("scroll.cboxie6")),D.add(G).add(F).add(E).add(C).hide(),H.html(P.close).show(),f.slideshow(),f.load()}var b="colorbox",c="hover",d=!0,e=!1,f,g=!a.support.opacity,h=g&&!window.XMLHttpRequest,i="cbox_open",j="cbox_load",k="cbox_complete",l="cbox_cleanup",m="cbox_closed",n="resize.cbox_resize",o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S={transition:"elastic",speed:350,width:e,height:e,innerWidth:e,innerHeight:e,initialWidth:"400",initialHeight:"400",maxWidth:e,maxHeight:e,scalePhotos:d,scrolling:d,inline:e,html:e,iframe:e,photo:e,href:e,title:e,rel:e,opacity:.9,preloading:d,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:e,overlayClose:d,slideshow:e,slideshowAuto:d,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:e,onLoad:e,onComplete:e,onCleanup:e,onClosed:e};f=a.fn.colorbox=function(c,e){var f=this;if(!f.length){if(f.selector!=="")return this;f=a(f),c.open=d}return f.each(function(){var d=a.extend({},a(this).data(b)?a(this).data(b):S,c);a(this).data(b,d).addClass("cboxElement"),e&&(a(this).data(b).onComplete=e)}),c&&c.open&&W(f),this},f.init=function(){function b(b){return a('<div id="cbox'+b+'"/>')}x=a(window),p=a('<div id="colorbox"/>'),o=b("Overlay").hide(),q=b("Wrapper"),r=b("Content").append(y=b("LoadedContent").css({width:0,height:0}),A=b("LoadingOverlay"),B=b("LoadingGraphic"),C=b("Title"),D=b("Current"),E=b("Slideshow"),F=b("Next"),G=b("Previous"),H=b("Close")),q.append(a("<div/>").append(b("TopLeft"),s=b("TopCenter"),b("TopRight")),a("<div/>").append(t=b("MiddleLeft"),r,u=b("MiddleRight")),a("<div/>").append(b("BottomLeft"),v=b("BottomCenter"),b("BottomRight"))).children().children().css({"float":"left"}),z=a("<div style='position:absolute; top:0; left:0; width:9999px; height:0;'/>"),a("body").prepend(o,p.append(q,z)),g&&(p.addClass("cboxIE"),h&&o.css("position","absolute")),r.children().addClass(c).mouseover(function(){a(this).addClass(c)}).mouseout(function(){a(this).removeClass(c)}),I=s.height()+v.height()+r.outerHeight(d)-r.height(),J=t.width()+u.width()+r.outerWidth(d)-r.width(),K=y.outerHeight(d),L=y.outerWidth(d),p.css({"padding-bottom":I,"padding-right":J}).hide(),F.click(f.next),G.click(f.prev),H.click(f.close),r.children().removeClass(c),a(".cboxElement").live("click",function(a){return a.button!==0&&typeof a.button!="undefined"?d:(W(this),e)})},f.position=function(a,b){function h(a){s[0].style.width=v[0].style.width=r[0].style.width=a.style.width,B[0].style.height=A[0].style.height=r[0].style.height=t[0].style.height=u[0].style.height=a.style.height}var c,d=x.height(),f=Math.max(d-P.h-K-I,0)/2+x.scrollTop(),g=Math.max(document.documentElement.clientWidth-P.w-L-J,0)/2+x.scrollLeft();c=p.width()===P.w+L&&p.height()===P.h+K?0:a,q[0].style.width=q[0].style.height="9999px",p.dequeue().animate({width:P.w+L,height:P.h+K,top:f,left:g},{duration:c,complete:function(){h(this),R=e,q[0].style.width=P.w+L+J+"px",q[0].style.height=P.h+K+I+"px",b&&b()},step:function(){h(this)}})},f.resize=function(c){function t(){return P.w=P.w||y.width(),P.w=P.mw&&P.mw<P.w?P.mw:P.w,P.w}function u(){return P.h=P.h||y.height(),P.h=P.mh&&P.mh<P.h?P.mh:P.h,P.h}function v(b){f.position(b,function(){if(!Q)return;g&&(o&&y.fadeIn(100),p[0].style.removeAttribute("filter")),P.iframe&&y.append("<iframe id='cboxIframe'"+(P.scrolling?" ":"scrolling='no'")+" name='iframe_"+(new Date).getTime()+"' frameborder=0 src='"+(P.href||M.href)+"' "+(g?"allowtransparency='true'":"")+" />"),y.show(),C.html(P.title||M.title),C.show(),w.length>1&&(D.html(P.current.replace(/\{current\}/,O+1).replace(/\{total\}/,w.length)).show(),F.html(P.next).show(),G.html(P.previous).show(),P.slideshow&&E.show()),A.hide(),B.hide(),a.event.trigger(k),P.onComplete&&P.onComplete.call(M),P.transition==="fade"&&p.fadeTo(s,1,function(){g&&p[0].style.removeAttribute("filter")}),x.bind(n,function(){f.position(0)})})}if(!Q)return;var d,e,i,j,m,o,q,s=P.transition==="none"?0:P.speed;x.unbind(n);if(!c){q=setTimeout(function(){var a=y.wrapInner("<div style='overflow:auto'></div>").children();P.h=a.height(),y.css({height:P.h}),a.replaceWith(a.children()),f.position(s)},1);return}y.remove(),y=a('<div id="cboxLoadedContent"/>').html(c),y.hide().appendTo(z).css({width:t(),overflow:P.scrolling?"auto":"hidden"}).css({height:u()}).prependTo(r),a("#cboxPhoto").css({cssFloat:"none"}),h&&a("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(l,function(){this.style.visibility="inherit"}),!(P.transition==="fade"&&p.fadeTo(s,0,function(){v(0)})||v(s)),P.preloading&&w.length>1&&(e=O>0?w[O-1]:w[w.length-1],j=O<w.length-1?w[O+1]:w[0],m=a(j).data(b).href||j.href,i=a(e).data(b).href||e.href,U(m)&&a("<img />").attr("src",m),U(i)&&a("<img />").attr("src",i))},f.load=function(){var c,h,i,k=f.resize;R=d,M=w[O],P=a(M).data(b),V(),a.event.trigger(j),P.onLoad&&P.onLoad.call(M),P.h=P.height?T(P.height,"y")-K-I:P.innerHeight?T(P.innerHeight,"y"):e,P.w=P.width?T(P.width,"x")-L-J:P.innerWidth?T(P.innerWidth,"x"):e,P.mw=P.w,P.mh=P.h,P.maxWidth&&(P.mw=T(P.maxWidth,"x")-L-J,P.mw=P.w&&P.w<P.mw?P.w:P.mw),P.maxHeight&&(P.mh=T(P.maxHeight,"y")-K-I,P.mh=P.h&&P.h<P.mh?P.h:P.mh),c=P.href||a(M).attr("href"),A.show(),B.show(),P.inline?(a('<div id="cboxInlineTemp" />').hide().insertBefore(a(c)[0]).bind(j+" "+l,function(){a(this).replaceWith(y.children())}),k(a(c))):P.iframe?k(" "):P.html?k(P.html):U(c)?(h=new Image,h.onload=function(){var b;h.onload=null,h.id="cboxPhoto",a(h).css({margin:"auto",border:"none",display:"block",cssFloat:"left"}),P.scalePhotos&&(i=function(){h.height-=h.height*b,h.width-=h.width*b},P.mw&&h.width>P.mw&&(b=(h.width-P.mw)/h.width,i()),P.mh&&h.height>P.mh&&(b=(h.height-P.mh)/h.height,i())),P.h&&(h.style.marginTop=Math.max(P.h-h.height,0)/2+"px"),k(h),w.length>1&&a(h).css({cursor:"pointer"}).click(f.next),g&&(h.style.msInterpolationMode="bicubic")},h.src=c):a("<div />").appendTo(z).load(c,function(b,c){c==="success"?k(this):k(a("<p>Request unsuccessful.</p>"))})},f.next=function(){R||(O=O<w.length-1?O+1:0,f.load())},f.prev=function(){R||(O=O>0?O-1:w.length-1,f.load())},f.slideshow=function(){function g(){E.text(P.slideshowStop).bind(k,function(){d=setTimeout(f.next,P.slideshowSpeed)}).bind(j,function(){clearTimeout(d)}).one("click",function(){b(),a(this).removeClass(c)}),p.removeClass(e+"off").addClass(e+"on")}var b,d,e="cboxSlideshow_";E.bind(m,function(){E.unbind(),clearTimeout(d),p.removeClass(e+"off"+" "+e+"on")}),b=function(){clearTimeout(d),E.text(P.slideshowStart).unbind(k+" "+j).one("click",function(){g(),d=setTimeout(f.next,P.slideshowSpeed),a(this).removeClass(c)}),p.removeClass(e+"on").addClass(e+"off")},P.slideshow&&w.length>1&&(P.slideshowAuto?g():b())},f.close=function(){a.event.trigger(l),P.onCleanup&&P.onCleanup.call(M),Q=e,a().unbind("keydown.cbox_close keydown.cbox_arrows"),x.unbind(n+" resize.cboxie6 scroll.cboxie6"),o.css({cursor:"auto"}).fadeOut("fast"),p.stop(d,e).fadeOut("fast",function(){y.remove(),p.css({opacity:1});try{N.focus()}catch(b){}a.event.trigger(m),P.onClosed&&P.onClosed.call(M)})},f.element=function(){return a(M)},f.settings=S,a(f.init)})(jQuery);